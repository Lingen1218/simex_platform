.. Documentation of data formats and metadata syntax in data generated by simex_platform calculators.

Data format documentation
-------------------------

FEL source calculations (FAST)
______________________________

File format: hdf5 (extension .h5)

+-----------------------------------------------+-----------------------------------------------------------+---------------+
| Data set                                      | Description                                               | Physical unit |
+===============================================+===========================================================+===============+
| /data/arrEhor                                 | horizontal electric field component                       | sqrt(W/mm^2)  |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /data/arrEver                                 | vertical electric field component                         | sqrt(W/mm^2)  |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/Mesh/nSlices                          | number of time slices                                     | 1             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/Mesh/nx                               | number of grid points in horizontal dimension (x)         | 1             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/Mesh/ny                               | number of grid points in vertical dimension (y)           | s             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/Mesh/sliceMax                         | time corresponding to last slice                          | s             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/Mesh/sliceMin                         | time corresponding to first slice                         | s             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/Mesh/xMax                             | x coordinate of last grid point in horizontal dimension   | m             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/Mesh/xMin                             | x coordinate of first grid point in horizontal dimension  | m             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/Mesh/yMax                             | y coordinate of last grid point in vertical dimension     | m             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/Mesh/yMin                             | y coordinate of first grid point in vertical dimension    | m             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/Mesh/zCoord                           | z coordinate of the wavefront                             | m             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/Rx                                    | instantaneous horizontal wavefront radius                 | m             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/Ry                                    | instantaneous vertical wavefront radius                   | m             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/dRx                                   | error in Rx                                               | m             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/dRy                                   | error on Ry                                               | m             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/nval                                  | data type of field values, 2 for complex                  | 1             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/photonEnergy                          | central photon energy (mean of spectrum)                  | eV            |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/wDomain                               | time or frequency domain                                  |               |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/wEFieldUnit                           | Electric field unit                                       |               |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/wFloatType                            | field numerical type                                      |               |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/wSpace                                | direct (r-space) or reciprocal (q-space)                  | m             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/xCentre                               | x coordinate of wavefront center                          | m             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /params/yCentre                               | y coordinate of wavefront center                          |               |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /history/parent/info/data\_description        | data documentation                                        |               |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /history/parent/info/package\_version         | code version                                              |               |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /history/parent/misc/FAST2XY.DAT              | FAST calculation data                                     |               |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /history/parent/misc/angular\_distribution    | angular distribution of source pulse                      | 1/rad         |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /history/parent/misc/spot\_size               | fhwm spot size                                            | m             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /history/parent/misc/gain\_curve              | gain curve                                                | 1             |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /history/parent/misc/nzc                      | Undulator length (point on gain curve)                    |               |
+-----------------------------------------------+-----------------------------------------------------------+---------------+
| /history/parent/misc/temporal\_struct         | Temporal pulse structure (on-axis projection)             |               |
+-----------------------------------------------+-----------------------------------------------------------+---------------+

Coherent wavefront propagation (WPG/SRW)
________________________________________

File format: hdf5 (extension .h5)

+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| Data set                                      | Description                                                     | Physical unit |
+===============================================+=================================================================+===============+
| /data/arrEhor                                 | horizontal electric field component                             | sqrt(W/mm^2)  |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /data/arrEver                                 | vertical electric field component                               | sqrt(W/mm^2)  |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/Mesh/nSlices                          | number of time slices                                           | 1             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/Mesh/nx                               | number of grid points in horizontal dimension (x)               | 1             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/Mesh/ny                               | number of grid points in vertical dimension (y)                 | s             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/Mesh/sliceMax                         | time corresponding to last slice                                | s             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/Mesh/sliceMin                         | time corresponding to first slice                               | s             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/Mesh/xMax                             | x coordinate of last grid point in horizontal dimension         | m             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/Mesh/xMin                             | x coordinate of first grid point in horizontal dimension        | m             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/Mesh/yMax                             | y coordinate of last grid point in vertical dimension           | m             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/Mesh/yMin                             | y coordinate of first grid point in vertical dimension          | m             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/Mesh/zCoord                           | z coordinate of the wavefront                                   | m             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/Rx                                    | instantaneous horizontal wavefront radius                       | m             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/Ry                                    | instantaneous vertical wavefront radius                         | m             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/dRx                                   | error in Rx                                                     | m             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/dRy                                   | error on Ry                                                     | m             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/nval                                  | data type of field values, 2 for complex                        | 1             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/photonEnergy                          | central photon energy (mean of spectrum)                        | eV            |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/wDomain                               | time or frequency domain                                        |               |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/wEFieldUnit                           | Electric field unit                                             |               |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/wFloatType                            | field numerical type                                            |               |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/wSpace                                | direct (r-space) or reciprocal (q-space)                        | m             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/xCentre                               | x coordinate of wavefront center                                | m             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /params/yCentre                               | y coordinate of wavefront center                                |               |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /history/parent                               | Previous module simulation data                                 |               |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /misc/xFWHM                                   | Horizontal full width at half maximum (intensity distribution)  | m             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+
| /misc/yFWHM                                   | Vertical full width at half maximum (intensity distribution)    | m             |
+-----------------------------------------------+-----------------------------------------------------------------+---------------+


Photon-Matter interaction (XMDYN)
_________________________________

File format: hdf5 (extension .h5)

+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| Data set                      | Description                                                                             | Physical unit |
+===============================+=========================================================================================+===============+
| /data/snp*/ff                 | 2D array of form factors. Rows: Atomic number, Columns: q                               | 1             |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /data/snp*/halfQ              | 1D array of half-period resolutions corresponding to column index in form factor arrays | 1/A           |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /data/snp*/Nph                | number of photons in the calculation                                                    | 1             |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /data/snp*/r                  | 2D array of atomic position vectors. Rows: Atom index, columns: x,y,z coordinates       | m             |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /data/snp*/T                  | 1D array of unique ID per atomic number                                                 |               |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /data/snp*/Z                  | 1D array of atom types per atomic position vector $r$                                   |               |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /data/snp*/xyz                | 1D array of indices of ff for each atom in Z                                            |               |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /data/snp*/Sq\_halfQ          | half period resolution q space spanned by Sq\_bound, Sq\_free                           | 1/A           |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /data/snp*/Sq\_bound          | 1D array for Compton scattering from bound electrons                                    | 1             |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /data/snp*/Sq\_free           | 1D array for Compton scattering from free electrons                                     | 1             |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /history/parent               | Parent data                                                                             |               |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /info/package\_version        | backengine code version                                                                 |               |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /info/contact                 | Support contact for backengine code                                                     |               |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /info/data\_description       | Data documentation                                                                      |               |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /info/method\_description     | Method documentation                                                                    |               |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+
| /version                      | hdf5 format version                                                                     |               |
+-------------------------------+-----------------------------------------------------------------------------------------+---------------+


Diffraction (singFEL)
_________________________________

File format: hdf5 (extension .h5)

+-------------------------------+-------------------------------------------------------------------------+---------------+
| Data set                      | Description                                                             | Physical unit |
+===============================+=========================================================================+===============+
| /data/diffr                   | 2D array. Photon number per pixel                                       |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /data/data                    | 2D array. Integrated photon number per pixel, poisson noise added.      |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /data/angle                   | Euler angles applied to atomic positions                                |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /history/parent               | Details of parent data                                                  |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /info/package\_version        | Backengine code version                                                 |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /info/contact                 | Support contact                                                         |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /info/data\_description       | Data documentation                                                      |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /info/method\_description     | Method documentation                                                    |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /params/geom/detectorDist     | Detector distance                                                       |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /params/geom/pixelWidth       | Pixel width (x)                                                         |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /params/geom/pixelHeight      | Pixel height (y)                                                        |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /params/geom/mask             | Masked pixels                                                           |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /params/beam/photonEnergy     | Central photon energy                                                   |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /params/beam/photons          | Number of photons in beam                                               |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /params/beam/focusArea        | Beam focus area                                                         |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+
| /params/info                  | Input parameter for backengine code                                     |               |
+-------------------------------+-------------------------------------------------------------------------+---------------+


